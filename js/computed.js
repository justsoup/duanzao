!function(){let e=document.querySelector(".mainBox1"),t=document.querySelector(".mainBox2"),n={},l=function(){t.style.display="none",e.style.display="block";let l=document.getElementById("selectBox"),a=document.getElementById("select2Box"),o=(l.getElementsByTagName("options"),document.getElementById("grade")),d=document.getElementById("btn"),u=document.getElementById("result"),c=document.getElementById("imgBox"),s=document.getElementById("data1"),i=document.getElementById("data2"),m=document.getElementById("data3"),r=document.getElementById("data4"),y=document.getElementById("data5"),g=document.getElementById("data6"),B=document.getElementById("data7"),p=document.getElementById("data8"),E=document.getElementById("data9"),v=null,x=null,I=(document.querySelector(".hiddenBox"),{0:1100,1:1200,2:1200,3:1300,4:1700,5:1800,6:1800,7:1900,8:2200,9:2300,10:2300,11:2400});new Promise((e,t)=>{let n=null,l=new XMLHttpRequest;l.open("GET","json/attribute.txt"),l.onreadystatechange=function(){4===l.readyState&&200===l.status&&(n=l.responseText,e(n))},l.send(null)}).then(function(e){let t=e.toString();v=t.split(/[a-w]/i)}),d.onclick=function(){let e=o.value,t=l.selectedIndex,a=null,d=I[t],i=null,m=null,r=800;if(n.grade=e,a=t<4?250:t<8?350:500,n.meltingMax=a,(r=r+100*parseFloat(y.value)+100*parseFloat(g.value)+60*parseFloat(B.value)+50*parseFloat(p.value))<parseFloat(d)){let e=parseFloat(d)-parseFloat(r);return u.innerText="失败了，需要再多加点燃料\n",void(u.innerText+="还缺少"+e+"°")}(i=function(e=0,t=0){return 250*e/t}(r,d))>a&&(i=a),m=Math.floor(e/50+3*i/20+.5*parseFloat(E.value)),x=1.2*m+parseFloat(s.value),x=Math.floor(100*x)/100,u.innerText="初始伤害为 "+x+"(只取整)\n",u.innerText+="锻造结果等级 "+m+"\n",0==l.value&&(console.log(l.value),u.innerText+="资料来源：放置江湖攻略组 \n"),c.style.display="block"};let f=function(){let e=l.value,t=a.value,n=v[t].replace(/^\s*|\s*$/g,"").split("\n")[e].split("\t");s.value=n[2],i.value=n[4],m.value=n[5],r.value=n[3]};l.onchange=f,a.onchange=f,c.onclick=function(){c.style.display="none"}},a=window.location.href,o=a.indexOf("#");switch(-1===o?null:a.slice(o+1)){case"first":l();break;default:l()}}();